<div class="timesheet" [class.disable]="disable" *ngIf="showTimeSheet;else noTimeSheetData">
  <div class="timesheet__overlay">
    <div class="timesheet__weekend-overlay">

    </div>
  </div>
  <div class="timesheet__head header-gradient">
    <div class="week">Week {{config?.week_number}}</div>
    <div class="timesheet_day" *ngFor="let day of config?.days;">
      <ng-container *ngIf="day != 'Total'">
        <span> {{day | date:'dd'}}</span>&nbsp;
        <span class="fs-10"> {{day | date:'EEE'}}</span>
      </ng-container>

      <div class="fw-500" *ngIf="day == 'Total'">{{day}}</div>
    </div>
    <!-- <div>Total</div> -->
  </div>
  <div class="timesheet__wrapper">
    <div class="timesheet__wrapper-bg"></div>
    <div class="timesheet__body">
      <div class="timesheet__row" *ngFor="let project of visibleActiveProjects;let i=index;">
        <div class="project">
          {{project?.project_name}} [{{project?.cumulative?.h | number:'2.'}} :
          {{project?.cumulative?.m | number:'2.' }}]
          <mat-icon *ngIf="project.priority != 1 && !disable" [attr.data-index]='i'
            class="timesheet__row-remove col-warn-500 mat-icon-small">
            remove_circle_outline
          </mat-icon>
        </div>
        <ng-container *ngFor="let day of project?.work_hours;let j=index;">
          <div *ngIf="day?.date != 'Total'">
            <app-time-field [index]="j"
              [formControl]="fgTimeFields['controls']['active_projects']['controls'][i].controls[j]"
              [editable]="!disable" [disabled]="!day?.enable"></app-time-field>
          </div>
          <div *ngIf="day?.date == 'Total'" [class.disabled]="day.h == '00' && day.m == '00'" class="total-row-value">{{day.h | number:'2.'}} : {{day.m | number:'2.'}}
          </div>
        </ng-container>
        <!-- <div >{{projectWeekTotal(project?.work_hours)}}</div> -->
      </div>
    </div>
    <div *ngIf="!disable && hiddenActiveProjects.length > 0" class="timesheet__row timesheet--sel-project"
      style="z-index: 1111;">
      <div #selProject class="sel-project" [class.disabled]="hiddenActiveProjects.length < 1">
        <div class="flex middle-xs center-xs sel-project__btn btn-outline">
          <mat-icon class="mat-icon-small mr-5">add_circle_outline</mat-icon>
          Select Project
        </div>
        <div class="sel-project__project-list" *ngIf="showProjectList && hiddenActiveProjects.length > 0">
          <div class="sel-project__project" [attr.data-project]="project?.project_id" [attr.index]="i"
            *ngFor="let project of hiddenActiveProjects;let i = index;">
            {{project?.project_name}}
          </div>
        </div>
      </div>
      <ng-container *ngFor="let x of [1,2,3,4,5,6,7,8]">
        <div>
        </div>
      </ng-container>
    </div>

    <div class="timesheet__row timesheet--misc">
      <div class="misc timesheet__row-title">
        Miscellaneous
      </div>
      <ng-container *ngFor="let day of config?.MISCELLANEOUS?.work_hours;let i=index;">
        <div *ngIf="day.date != 'Total'">
          <app-time-field [index]="i" [formControl]="fgTimeFields['controls']['MISCELLANEOUS']['controls'][i]"
            [editable]="!disable" [disabled]="!day?.enable"></app-time-field>
        </div>
        <div  [class.disabled]="day.h == '00' && day.m == '00'" *ngIf="day.date == 'Total'" class="total-row-value">{{day.h | number:'2.'}} : {{day.m | number:'2.'}}</div>
      </ng-container>
      <!-- <div >{{projectWeekTotal(config?.MISCELLANEOUS?.work_hours)}}</div> -->
    </div>
    <div class="timesheet__row timesheet--holi">
      <div class="holi  timesheet__row-title">
        Holiday
      </div>
      <ng-container *ngFor="let day of config?.HOLIDAY?.work_hours;let i=index;">
        <div *ngIf="day?.date != 'Total'">
          <app-time-field [index]="i" [formControl]="fgTimeFields['controls']['HOLIDAY']['controls'][i]"
            [editable]="!disable" [disabled]="!day?.enable"></app-time-field>
        </div>
        <div  [class.disabled]="day.h == '00' && day.m == '00'" *ngIf="day?.date == 'Total'" class="total-row-value">{{day.h | number:'2.'}} : {{day.m | number:'2.'}}
        </div>
      </ng-container>
      <!-- <div >{{projectWeekTotal(config?.HOLIDAY?.work_hours)}}</div> -->
    </div>
    <div class="timesheet__row  timesheet--vacation">
      <div class="vacation  timesheet__row-title">
        Vacation
      </div>
      <ng-container *ngFor="let day of config?.VACATION?.work_hours;let i=index;">
        <div *ngIf="day?.date != 'Total'">
          <app-time-field [index]="i" [formControl]="fgTimeFields['controls']['VACATION']['controls'][i]"
            [editable]="!disable" [disabled]="!day?.enable"></app-time-field>
        </div>
        <div  [class.disabled]="day.h == '00' && day.m == '00'" *ngIf="day?.date == 'Total'" class="total-row-value">{{day.h | number:'2.'}} : {{day.m | number:'2.'}}
        </div>
      </ng-container>
      <!-- <div >{{projectWeekTotal(config?.VACATION?.work_hours)}}</div> -->
    </div>
    <div class="timesheet__row timesheet--total">
      <div class="total  timesheet__row-title">
        Total Hours
      </div>
      <ng-container *ngFor="let x of [1,2,3,4,5,6,7];let i=index;">
        <div class="fs-16 total-value">
          <!-- <app-time-field [editable]="false" 
                    [formControl]="fgTotalTimeFields['controls']['total']['controls'][i]"></app-time-field> -->
          {{totalDayTimeMeta[i]?.h | number:'2.'}} : {{totalDayTimeMeta[i]?.m | number:'2.'}}
          <p class="error-total" *ngIf="totalDayTimeMeta[i]?.showError">The total hours for a day has to be less than
            24.
          </p>
        </div>
      </ng-container>
      <div  [class.disabled]="grandTotal == '00 : 00'" class="total-row-value">{{grandTotal}}</div>
    </div>
    <ng-container *ngIf="config.attendance_flag">
      <div class="pb-5">
        <div class="timesheet__row  timesheet--nethours p-2">
          <div class="nethours timesheet__row-title">
            Net Working Hours<br><span class="fs-12">(from Access Control)</span>
          </div>
          <ng-container *ngFor="let day of config?.net_working_hours;let i=index;">
            <div *ngIf="day?.date != 'Total'" class="total-value">
              {{day.h | number:'2.'}} : {{day?.m | number:'2.'}}
            </div>
            <div [class.disabled]="day.h == '00' && day.m == '00'" *ngIf="day?.date == 'Total'" class="total-row-value">{{day.h | number:'2.'}} : {{day.m | number:'2.'}}
            </div>
          </ng-container>
        </div>

        <div class="timesheet__row  timesheet--grosshours p-2">
          <div class="grosshours timesheet__row-title">
            Gross Working Hours<br><span class="fs-12">(from Access Control)</span>
          </div>
          <ng-container *ngFor="let day of config?.gross_working_hours;let i=index;">
            <div *ngIf="day?.date != 'Total'" class="total-value">
              {{day.h | number:'2.'}} : {{day?.m | number:'2.'}}
            </div>
            <div [class.disabled]="day.h == '00' && day.m == '00'" *ngIf="day?.date == 'Total'" class="total-row-value">{{day.h | number:'2.'}} : {{day.m | number:'2.'}}
            </div>
          </ng-container>
          <!-- <div >{{projectWeekTotal(config?.VACATION?.work_hours)}}</div> -->
        </div>
      </div>
    </ng-container>
  </div>
</div>
<ng-template #noTimeSheetData>
  <!-- <p class="p-15 dis-ib" style="background:#ccc;">None</p> -->
  <div class="flex col middle-xs center-xs pt-50 mt-50">
      <img src="./assets/images/happy_announcement.png" alt="">
      <p class="col-primary-400 mt-10">No Pending Timesheets to submit</p>
  </div>
</ng-template>

<app-modal-popup [w]="500" [h]="250">
  <div head="">
    Confirm
  </div>
  <div class="p-15">
    Are you sure you want to remove the project ? All entries will be lost.
    <div class="mt-30 flex end-xs">
      <app-button theme="black" class="mr-30 remove-project-cancel">Cancel</app-button>
      <app-button class="remove-project-proceed">Proceed</app-button>
    </div>
  </div>
</app-modal-popup>
